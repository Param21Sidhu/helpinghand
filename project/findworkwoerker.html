<!doctype html>
<html lang="en">
  <head>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
     <link rel="stylesheet" href="css/findworkworker.css">
   <script src="js/angular.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <title>Hello, world!</title>
    <script>
             var mymodule=angular.module("mymodule",[]);
        var mycontroller=mymodule.controller("mycontroller",function($scope,$http){
        
           $scope.showcity=function()
           {
               
               var url="/findworkcityandcategory";
               $http.get(url).then(kuchfxgood,kuchfxbad);
    function kuchfxgood(response)
    {
       // alert(JSON.stringify(response.data));
        $scope.jsonAryCitywithFacul=response.data;
        $scope.selcity=$scope.jsonAryCitywithFacul[0].city;
        $scope.selcategory=$scope.jsonAryCitywithFacul[0].Faculties;
    }
    function kuchfxbad(response)
    {
        alert(JSON.stringify(response.data));
    }

           }

        $scope.showdata=function()
        {
            //alert($scope.selcity);
            //alert($scope.selcategory);
            var url="/showall?x="+$scope.selcity+"&y="+$scope.selcategory;
            $http.get(url).then(kuchfxgood,kuchfxbad);
    function kuchfxgood(response)
    {
       // alert(JSON.stringify(response.data));
        $scope.jsonAryall=response.data;
    }
    function kuchfxbad(response)
    {
        alert(JSON.stringify(response.data));
    }
        }



        $scope.knowmore=function(knowemail,index){

         // alert(knowemail);
         //alert(index);
          var url="/knowmoreall?x="+knowemail;
          $http.get(url).then(kuchfxgood,kuchfxbad);
    function kuchfxgood(response)
    {
       // alert(JSON.stringify(response.data));
       $scope.jsonAryknowall=response.data;
       $scope.obj=$scope.jsonAryknowall[index];
       //alert($scope.obj.Email);
    }
    function kuchfxbad(response)
    {
        alert(JSON.stringify(response.data));
    }     
        }


  
  
            
        
        
        
        })



    </script>
  </head>
  <body ng-app="mymodule"  ng-controller="mycontroller" ng-init="showcity();">
   

        <div class="container">
            <div class="row">
                <div class="col-12 text-center">
                    <h3>Find Your Preferable Work...</h3>
                </div>
            </div>
            <div class="row" id="r2">
               
                <div class="col-md-5" >
                   <label for="txtcity" class="form-label">City</label>
                  
                   <select id="txtcity"  class="form-control" ng-model="selcity">
                       <option ng-repeat="obj in jsonAryCitywithFacul" value="{{obj.city}}">{{obj.city}}</option>
                   </select>
   
              
                  
            
                </div>
                <div class="col-md-5">
                   <label for="txtwork" class="form-label">Category</label>
                  
                   <select id="txtwork"  class="form-control" ng-model="selcategory" >
                       <option ng-repeat="obj in jsonAryCitywithFacul" value="{{obj.Faculties}}">{{obj.Faculties}}</option>
                   </select>
                </div>
                       </div>

               


                       

                <div class="row" id="rsearch">
                    <div class="col-12">
                        <div id="picsearch" ng-click="showdata();"></div>
                    </div>
                </div>





                <div class="row" id="tab">
                   <div class="col-md-11" ></div>
                        <form >
                            <table  class="table table-bordered">
                                 <thead class="table-light">
                                     <td>#</td>
                                     <td>Email Id</td>
                                     <td>City</td>
                                     <td>What Needs</td>
                                     <td>Till Date</td>
                                     <td>Details</td>
                                 </thead>
                                 <tr ng-repeat="obj in jsonAryall">
                                     <td></td>
                                     <td>{{obj.Email}}</td>
                                     <td>{{obj.city}}</td>
                                     <td>{{obj.what}}</td>
                                     <td>{{obj.TillDate}}</td>
                                     <td ><button type="button" ng-click="knowmore(obj.Email,$index);" class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
                                        Know more
                                      </button</td>
                                 </tr>
                            </table>

                           



                        </form>

                </div>
            </div>
            <div ng-repeat="obj in jsonAryknowall" class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Full Datails</h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body">
                   <div id="box">
                          <table id="btable">
                            <tr>
                              <td>
                            <h4>  ID Photo</h4>
                              </td>
                              <td>
                            <img src="pics/{{obj.Picture}}" width="130px" height="160px" alt="">
                              </td>


                            </tr>
                            <tr>
                              <td><h4>Email</h4></td>
                              <td>{{obj.Email}}</td>
                            </tr>
                            <tr>
                              <td>
                                <h4>
                                  Name
                                </h4>
                              </td>
                              <td>
                                {{obj.Name}}
                              </td>
                            </tr>
                            <tr><td>
                              <h4>Contact</h4>
                            </td>
                          <td>
                            {{obj.Contact}}
                          </td></tr>
                          <tr>
                            <td><h4>
                              Address</h4>
                            </td>
                          <td>
                            {{obj.Address}}
                          </td>                                             </h4></td>
                          </tr>
                          <tr>
                            <td><h4>
                              Plan
                            </h4></td>
                            <td>
                              {{obj.Plan}}
                            </td>
                          </tr>
                          <tr>
                            <td>
                              <h4>
                                Date of Submission
                              </h4>
                            </td>
                            <td>
                              {{obj.Tareek}}
                            </td>
                          </tr>
                          

                          
                          </table>                                               
                          
                   </div>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                   
                  </div>
                </div>
              </div>
            </div>

  

    
  </body>
</html>